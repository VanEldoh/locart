<h2 class="booking-title pl-5">Mes oeuvres </h2>

<section class="section">
    <% @booking_requests.each do |booking| %>
    <div class="booking-artwork-card">
      <div class="row w-75 align-items-center" >
        <div class="image d-flex flex-shrink-1" style="padding-right: 20px">
          <div style="position: relative">
            <%= cl_image_tag booking.artwork.photo, :width => 100 %>
          <div class="caption"><%= booking.artwork.title %></div>
          </div>
        </div>

        <div class="booking-card-details col">
          <h3>Requested by: <%= booking.user.username %></h3>
          <p class="m-0"><strong><%= booking.artwork.price %>€/day</strong></p>
          <p class="date">
            <i class="far fa-calendar"></i>
            <span><strong><%= booking.start_date %> to <%= booking.end_date %></strong></span>
          </p>
        </div>

        <% if booking.artwork.user == current_user && booking.status == 'Pending' %>
          <div class="button-group d-flex flex-shrink-1">
            <%= link_to 'OK', booking_booking_status_change_path(booking), method: :post, class: 'btn btn-primary mr-1'  %>
            <button type="button" class="btn btn-danger">cancel</button>
          </div>
        <% elsif %>
          <% booking.artwork.user == curent_user && booking.status == 'Accepted' %>
          <p class="booking-approved">
            <i class="far fa-check-circle"></i>
          </p>
        <% else %>
           <% booking.artwork.user == curent_user && booking.status == 'Declined' %>
            <p class="booking-declined">
            <i class="fas fa-ban"></i>
          </p>
        <% end %>
      </div>
    </div>
    <% end %>
</section>


<h2 class="booking-title pl-5">Mes locations</h2>

<section class="section container">
  <% @bookings.each do |booking| %>
    <div class="booking-artwork-card">
      <div class="row w-100 align-items-center">


        <div class="image d-flex flex-shrink-1"  style="padding-right: 20px">
          <div style="position: relative">
            <%= cl_image_tag booking.artwork.photo, :width => 100 %>
            <div class="caption"><%= booking.artwork.title %></div>
          </div>
        </div>

        <div class="booking-card-details col">
          <h3>Artist:
            <%= booking.artwork.user.username%>
          </h3>
            <p><%= booking.artwork.size %></p>
            <p><%= booking.artwork.art_type %></p>
            <p><%= booking.artwork.category %></p>
            <p><%= booking.artwork.art_date %></p>
            <p><strong><%= booking.artwork.price %>€/day</strong></p>
            <p class="date">
              <i class="far fa-calendar"></i>
              <span class=""><strong><%= booking.start_date %> to <%= booking.end_date %></strong></span>
            </p>
            <% if booking.artwork.user != current_user && booking.status == 'Pending' %>
              <div class="booking-status d-flex flex-shrink-1">
              <p><strong>Awaiting confirmation...</strong></p>
            <% elsif %>
              <% booking.artwork.user != current_user && booking.status == 'Approved' %>
                <p class="booking-approved">
                <i class="far fa-check-circle"></i>
                </p>
              <% else %>
              <% booking.artwork.user != current_user && booking.status == 'Declined' %>
              <p class="booking-declined">
            <i class="fas fa-ban"></i>
              </p>
            </div>
          <% end %>
        </div>

      </div>
    </div>
    <% end %>
</section>

<div class="login-img">
  <div class="container">
    <div class="wrapper">
        <div class ="sidebar-booking">
          <%= link_to "My bookings", all_artworks_path, class: "btnsign-inverse" %>
          <%= link_to "My artworks", all_artworks_path, class: "btnsign-inverse" %>
        </div>
        <div class="main-booking">
          <h2>My bookings</h2>
            <% @bookings.each do |booking| %>
            <div class="item-booking">
              <div class="img-booking">
                <%= cl_image_tag booking.artwork.photo%>
              </div>
              <div class ="content-booking">
                <p><span style="color:#144C52"><strong><%= "Artist name: " %></strong><%= booking.artwork.user.username%></span></p>
                <h3 class="artwork-artist"><span style="color:#144C52"><%= "Title: " %></span><strong><%= booking.artwork.title %></strong></h3>

                <h4 class="artwork-title"><span style="color:#144C52"><strong><%= "Price: " %></strong><%= booking.artwork.price %>€/day</span></h4>
                <h4 class="artwork-title"><span style="color:#144C52"><strong><%= "Type: " %></strong><%= booking.artwork.art_type %></span></h4>
                <div class="date-status">
                      <p class="date">
                        <i class="far fa-calendar"></i>
                        <span class=""><strong><%= booking.start_date %> to <%= booking.end_date %></strong></span>
                      </p>
                      <% if booking.artwork.user != current_user && booking.status == 'Pending' %>
                      <p><span style="color:#144C52"><strong>Status: </strong></span><strong>Awaiting confirmation...</strong></p>
                      <% elsif %>
                      <% booking.artwork.user != current_user && booking.status == 'Approved' %>
                      <i class="far fa-check-circle"></i>
                      <% else %>
                      <% booking.artwork.user != current_user && booking.status == 'Declined' %>
                      <i class="fas fa-ban"></i>
                    <% end %>
                </div>
              </div>
            </div>
          <% end %>
      </div>
    </div>
  </div>
  </div>
</div>



